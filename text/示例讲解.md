# 先来看看示例代码


## 贪吃蛇
https://github.com/fwqcuc/summer_semester/tree/master/samples/Snake

## 飞机大战
https://github.com/fwqcuc/summer_semester/tree/master/samples/FighterFight


## 实验一，初步使用git和github
1、注册github  
2、fork老师的示例代码仓库  
3、安装git客户端  
4、clone仓库  

如果不会用git，你将无法交作业。

## 实验二，编译运行示例代码

* 使用VS双击打开sln文件。
* bulid整个解决方案，成功编译。
* 能成功运行snake和FighterFight两个示例程序。
* 可能问题：VS版本不匹配，修改工程属性"平台工具集"即可。

错误的做法：直接从github页面上拷贝代码自己新建工程。你可以会遇到一些以你目前的水平无法解决的配置错误，如子系统、字符集等等。


## 你可能已经具备的能力

* 能初步读懂示例代码
* 能够写出基础的C语言程序来

## 你可能还欠缺哪些方面的能力

* 知道开发过程中需要用到哪些工具和支持环境。
* 知道程序是如何运行的，对程序运行的环境和机制的熟悉。
* 清楚程序工程中的每一个文件是做什么用的。
* 能够把源代码变成可执行程序（对编译型语言），知道其详细的过程，并能解决这个过程中出现的错误。
* 能够把程序部署到执行环境（对脚本型语言），知道其详细的过程，并能解决这个过程中出现的错误。
* 能够把比较大的程序进行良好的划分和组织，使得开发过程不会乱掉，其他同伴可以理解你的程序。
* 可以找出程序中的错误，调试的能力。
* 可以发现程序崩溃的运行，并解决。
* 有效的版本控制的能力。能够不断的修改程序，并且不乱掉。
* 协同开发的能力。
* 阅读文档的能力。
* 搜索能力。




## 如何学习

能力可以归纳为三方面  

![](http://i.imgur.com/865doKc.png)

<table>
   <tr>
      <td></td>
      <td>语言</td>
      <td>工具</td>
      <td>平台</td>
      <td>设计模式（如何有效的组织代码）</td>
   </tr>
   <tr>
      <td>消息框</td>
      <td>typedef 自定义数据类型、Windows数据类型</td>
      <td>msdn文档的查看</td>
      <td>API的基本概念</td>
      <td></td>
   </tr>
   <tr>
      <td></td>
      <td>"|"运算符，标志位设置</td>
      <td>修改工程属性</td>
      <td>Windows.h</td>
      <td></td>
   </tr>
   <tr>
      <td></td>
      <td>利用对常量进行宏定义提高代码可读性</td>
      <td>设置和修改字符集</td>
      <td>Windows API的字符集版本A和W</td>
      <td></td>
   </tr>
   <tr>
      <td>第一个窗口函数</td>
      <td>函数指针</td>
      <td></td>
      <td>窗口类</td>
      <td></td>
   </tr>
   <tr>
      <td></td>
      <td>回调机制</td>
      <td></td>
      <td>创建窗口</td>
      <td></td>
   </tr>
   <tr>
      <td></td>
      <td></td>
      <td></td>
      <td>窗口类和窗口的相关属性</td>
      <td></td>
   </tr>
   <tr>
      <td></td>
      <td></td>
      <td></td>
      <td>窗口消息处理函数及其参数</td>
      <td></td>
   </tr>
   <tr>
      <td>断点调试消息函数</td>
      <td></td>
      <td>断点</td>
      <td>Windows消息队列</td>
      <td></td>
   </tr>
   <tr>
      <td></td>
      <td></td>
      <td>单步执行</td>
      <td>Windows消息循环中对消息处理函数的回调</td>
      <td></td>
   </tr>
   <tr>
      <td></td>
      <td></td>
      <td>执行到下一个断点</td>
      <td></td>
      <td></td>
   </tr>
   <tr>
      <td>贪吃蛇</td>
      <td></td>
      <td></td>
      <td>创建计时器</td>
      <td>接口封装：数据结构和数据的分离，以链表为例。</td>
   </tr>
   <tr>
      <td></td>
      <td></td>
      <td></td>
      <td>窗口消息函数中处理计时器消息</td>
      <td>MVC:定义底层的数据结构</td>
   </tr>
   <tr>
      <td></td>
      <td></td>
      <td></td>
      <td>窗口消息函数中处理键盘消息</td>
      <td>MVC:封装对数据的操作接口</td>
   </tr>
   <tr>
      <td></td>
      <td></td>
      <td></td>
      <td>GDI:基本概念，DC,画笔、画刷、画图函数</td>
      <td>MVC:封装主要的数据处理（变化）的业务逻辑接口</td>
   </tr>
   <tr>
      <td></td>
      <td></td>
      <td></td>
      <td>GDI:画图的基本流程</td>
      <td>MVC:控制层，基于事件的控制，对底层接口的调用。</td>
   </tr>
   <tr>
      <td></td>
      <td></td>
      <td></td>
      <td>GDI:内存DC缓存</td>
      <td>MVC:视图层，根据需要基于底层数据绘制图形</td>
   </tr>
   <tr>
      <td></td>
   </tr>
</table>




---

## 这次课程就是一个开始

虽然列了这么多技能，但是本课程没有全部涉及。
我们以完成要求的编程内容为主线，会涉及其中几个方面。
其他内容供同学以后学习是参考。

---


---

实验一，初步使用git和github
1、注册github
2、fork老师的示例代码仓库
3、安装git客户端
4、clone仓库
5、修改代码并提交。

---

案例学习：

MessageBox

---

实验二：
运行对话框程序
修改对话框中显示的文本

---

案例总结
1、关于Windows API
2、关于Windows date type
3、Windows 头文件
4、在VS中建立工程，bulid和运行程序

---

任何程序都需要依赖基础环境。
在掌握基本语法的基础上，能够熟练调用底层提供的基础功能库函数是开发软件的必备知识。
以C语言为例，目前主流的操作系统的大部分代码都是C语言开发的，如Windows和Linux（包括各种以Linux内核为基础的系统，如Android等），Windows和Linux的原生应用程序官方也推荐使用C语言作为标准的开发语言。
C语言有标准库，C语言的标准库函数的功能比较有限，显然不足以开发出我们日常所见的丰富多彩的应用程序。Windows和Linux系统又各自提供了一套基础的功能库函数。
在Windows系统中，这套库函数就是Windows API。

---

API application programing interface 应用程序开发接口。
顾名思义，是在操作系统中开发应用程序所需要的底层的库接口函数。
Windows API是C语言形式的，功能非常丰富。调用方法和C语言的标准库函数类似。

---

```cpp
#include <Windows.h>
```

---

C语言语法知识点补充：
```cpp
typedef
```
关键字

---

案例学习：
第一个窗口程序

---

实验三
运行第一个窗口程序
修改窗口标题
修改窗口背景颜色
修改鼠标样式
修改窗口初始大小和位置

---

案例总结：

1、函数指针和回调
2、Windows消息机制和相关API


---

C语言语法知识点补充：
函数指针


---

案例学习：
贪吃蛇游戏

---

实验四
修改贪吃蛇游戏的时间频率，使其游戏难度变化。
修改蛇的样式
增加记分功能

---

案例总结
1、GDI  
2、鼠标键盘消息处理  
3、计时器驱动的程序运行  
4、事件驱动型程序  
顺序执行型的程序和事件驱动型的程序是程序的两种基本形态。  
不同于之前大家学习的（也是大多数C语言教程中将到的）顺序执行型程序。大多数GUI程序、网络程序都是此种类型的程序。事件驱动型程序依赖于回调机制。  
使用getc、scanf等标准C语言库函数编写交互程序仍然是顺序执行型的。不具备**发生时间不确定**的事件处理的能力。  

---

案例学习
飞机大战

---

实验五
修改背景  
修改透明度  
增加敌机数量。  
子弹和敌机用位图，而不是圆圈。  


---

案例总结
1、位图
2、编写大型程序的模式（设计模式）
最经典的MVC

---

## MVC

1、先构思设计好游戏中需要哪些数据能够表示一个游戏的状态和过程等，选择数据结构，定义变量。
2、编写好操作这些数据的接口函数。（**Module**）
3、编写控制程序（处理键盘输入、时间等的回调函数），控制程序需要使用到数据是，不直接访问，而是调用M部分的接口函数。（**Control**）
4、编写显示程序（基于Windows消息GDI等）同样，显示程序程序需要使用到数据是，不直接访问，而是调用M部分的接口函数。（**View**）

---

原则：
数据与逻辑分离。数据是数据逻辑是逻辑，数据和逻辑在代码上分离。
逻辑部分代码，不要直接访问底层数据，而是通过接口访问。

建议
将数据及其操作接口写到一个C文件中、将操作数据的接口函数在头文件中声明，以便可以跨文件调用。最好可以使用extern关键字跨文件访问全局变量，但是最好不要这样做。

思想
封装、模块化、数据松耦合。
上层业务不用关心底层数据的具体结构，需要时调用一个函数即可获得。


---

案例学习
飞机大战(音乐版）

---

案例总结
1、多线程

---

实验
更换背景音乐
增加爆炸音效

---

初步编写多函数的C语言常见错误。
1、试图通过给参数赋值向主调函数返回数据。
原理：参数传递是入栈的方式，会被拷贝，只赋值给了这个拷贝。而这个拷贝和局部变量一样，作用域只在函数内部，函数执行完返回以后就没有了。PS：如果要通过参数返回数据，必须是指针，赋值给一个函数返回以后仍然有效的数据块中。


---
错误示例（结果为0）

```cpp
void get_a(int a){
    a=100;
}
int main(){
    int a=0;
    get_a(a);
    printf("%d", a)
}
```
正确示例（结果为100）

```cpp

void get_a(int* a){
    *a=100;
}
int main(){
    int a=0;
    get_a(&a);
    printf("%d", a)
}

```

---

初步编写多函数的C语言常见错误。
2、传送门错误。
教科书上讲：局部变量的作用域在函数范围内。
这里是指的**一次运行**。
运行完局部变量数据就丢弃了，下一次再运行时和上一次运行没有关系。


---
错误示例

```cpp
int count(){
    int a;
    a++;
    return a;
}
int main(){
    while(1){
    count();
    }
}
```
正确示例

```cpp
int a=0;
int count(){
    a++;
    return a;
}
int main(){
    while(1){
    count();
    }
}
```

---

案例学习
命令行编译链接和编译链接错误排查

---

案例总结

0、命令行基础
1、从源代码到可执行二进制程序的过程
2、编译和链接过程的详细过程及其对环境的依赖


